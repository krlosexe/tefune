<!---728x90--->
<!-- modal -->
<div class="modal about-modal fade" id="myModal_factura" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf01.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_cheques" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf02.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_letra" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf03.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_arriendo" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf04.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_habitacional" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf05.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_comercial" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf05.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_maquinas" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf06.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_directo" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf07.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_auto" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf08.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_laboral" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf09.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_incumplimiento" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf10.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_online" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf11.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_virtual" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf12.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal about-modal fade" id="myModal_extranjeros" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Te Fune</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<img src="<?= base_url()?>assets/home/images/tf13.jpg" alt="" />
					<p></p>
				</div>
			</div>
		</div>
	</div>
</div>


<!-- //modal -->





<!---728x90--->
<!-- modal registro -->
<div class="modal about-modal fade" id="modal_registro" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Registro de Usuario</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<form method="GET">
						<div class="row" style="padding: 14px;">
							<div class="input-inline col-md-6">
								<label for="email">Email</label>
								<input type="email" id="email" class="form-control" name="email">
								<?= form_error("email","<span class='help-block'>","</span>") ?>
							</div>

							<div class="input-inline col-md-6">
								<label for="name">Nombre de Usuario</label>
								<input type="text" id="name" class="form-control" name="name">
							</div>

							<div class="input-inline col-md-6">
								<label for="pass1">Contraseña</label>
								<input type="password" id="pass1" class="form-control" name="pass1">
							</div>

							<div class="input-inline col-md-6">
								<label for="pass2">Repita la Contraseña</label>
								<input type="password" id="pass2" class="form-control" name="pass2">
							</div>
								<br><br>
							<div class="input-inline col-md-12">
								<button type="button" id="btn-registro" class="btn btn-primary pull-right" style="margin-top: 3%;">Registrarme</button>
							</div>
							
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- //modal registro -->



<!---728x90--->
<!-- modal registro -->
<div class="modal about-modal fade" id="modal_login" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header"> 
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>						
				<h4 class="modal-title">Inicio de Sesion</h4>
			</div> 
			<div class="modal-body">
				<div class="agileits-w3layouts-info">
					<form method="post">
						<div class="row" style="padding: 14px;">
							<div class="input-inline col-md-6">
								<label for="user">Nombre de usuario</label>
								<input type="text" id="user" class="form-control" name="user">
							</div>

							<div class="input-inline col-md-6">
								<label for="password">Contraseña</label>
								<input type="password" id="password" class="form-control" name="password">
							</div>
							
								<br><br>
							<div class="input-inline col-md-12">
								<button type="button" id="btn-login" class="btn btn-primary pull-right" style="margin-top: 3%;">Entrar</button>
							</div>
							
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- //modal registro -->

<!-- 
ESCRIPT REGISTRO DE USUARIO -->
<script>
	$("#btn-registro").on("click", function(){
		var datos = {
			"email" : $("#email").val(),
			"name"  : $("#name").val(),
			"pass1" : $("#pass1").val(),
			"pass2" : $("#pass2").val()
		}
		$.ajax({
			type    : "GET",
			dataType: "json",
			data    : datos,
			url     : "<?= base_url()?>users/registro",

			beforeSend: function () {
		       $('#btn-registro').text(' Enviando...').attr('disabled', 'disabled').prepend('<i class="fa fa-spinner fa-spin"></i>');
		    },

			success(data){
				//console.log(data);
			}
		}).done((data, textStatus, jqXHR) => {

	    if (jqXHR.status === 200) {
	        if(jqXHR.responseJSON.success == true){
	          toastr.success(jqXHR.responseJSON.message);
	          $('#modal_registro').modal('hide');
	          $('#modal_login').modal('show');
	        }else{
	           if(jqXHR.responseJSON.valid == true){
	           	toastr.warning(jqXHR.responseJSON.message);
	           	//console.log(jqXHR.responseJSON.campos);
	           	var campos = jqXHR.responseJSON.campos;
	           	$.each(campos, function(i, item) {
	           		if (item != "") {
	           			var id = "#"+i;
	           			var cont = $(id).parent().addClass("has-error");
	           			$(id).parent().children("span").remove();
	           			cont = $(id).parent().append(item);
	           		}else{
	           			var id = "#"+i;
	           			var cont = $(id).parent().removeClass("has-error");
	           			$(id).parent().children("span").remove();
	           			
	           		}
				});
	           }else{
	           	toastr.warning(jqXHR.responseJSON.message);
	           }
	         }
	    }
	  })
	  .always(() => {
        $('#btn-registro').text('Registrarme').removeAttr('disabled');
      });
		//console.log(datos);
	})
</script>





<!-- 
ESCRIPT LOGIN -->

<script>
	$("#btn-login").on("click", function(){
		var datos = {
			"user"     : $("#user").val(),
			"password" : $("#password").val()
		}
		$.ajax({
			type    : "GET",
			dataType: "json",
			data    : datos,
			url     : "<?= base_url()?>users/login",

			beforeSend: function () {
		       $('#btn-login').text(' Enviando...').attr('disabled', 'disabled').prepend('<i class="fa fa-spinner fa-spin"></i>');
		    },

			success(data){
				console.log(data);
			}
		}).done((data, textStatus, jqXHR) => {

	    if (jqXHR.status === 200) {
	        if(jqXHR.responseJSON.success == true){
	          toastr.success(jqXHR.responseJSON.message);
	          window.location.href ="<?= base_url()?>dashboard";
	        }else{
	           if(jqXHR.responseJSON.valid == true){
	           	toastr.warning(jqXHR.responseJSON.message);
	           	//console.log(jqXHR.responseJSON.campos);
	           	var campos = jqXHR.responseJSON.campos;
	           	$.each(campos, function(i, item) {
	           		if (item != "") {
	           			var id = "#"+i;
	           			var cont = $(id).parent().addClass("has-error");
	           			$(id).parent().children("span").remove();
	           			cont = $(id).parent().append(item);
	           		}else{
	           			var id = "#"+i;
	           			var cont = $(id).parent().removeClass("has-error");
	           			$(id).parent().children("span").remove();
	           			
	           		}
				});
	           }else{
	           	toastr.warning(jqXHR.responseJSON.message);
	           }
	         }
	    }
	  })
	  .always(() => {
        $('#btn-login').text('Entrar').removeAttr('disabled');
      });
		//console.log(datos);
	})
</script>